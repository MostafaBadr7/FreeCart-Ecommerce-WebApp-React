"use strict";(self.webpackChunke_commerce=self.webpackChunke_commerce||[]).push([[864],{2864:(e,t,c)=>{c.r(t),c.d(t,{default:()=>i});var a=c(9060),s=c(4032),n=c(12),o=c(8372),r=c(2496);const l=(0,a.lazy)((()=>c.e(204).then(c.bind(c,6204)))),m=(0,a.lazy)((()=>Promise.resolve().then(c.bind(c,9080))));function i(){var e;const[t,c]=(0,a.useState)(!1),[i,d]=(0,a.useState)(!0),[u,h]=(0,a.useState)();let{counter:x,setcounter:f}=(0,a.useContext)(s.A);async function p(e){d(e);const{data:t}=await o.c.delete("https://ecommerce.routemisr.com/api/v1/cart/".concat(e),{headers:{token:localStorage.getItem("ecommToken")}});c(t.data),f(t.numOfCartItems),d(!1)}function g(e,t){clearTimeout(u),h(setTimeout((async()=>{if(0===t)p(e);else{const{data:a}=await o.c.put("https://ecommerce.routemisr.com/api/v1/cart/".concat(e),{count:t},{headers:{token:localStorage.getItem("ecommToken")}});c(a.data)}})))}return(0,a.useEffect)((()=>{!async function(){if(localStorage.getItem("ecommToken"))try{d("cart");const{data:e}=await o.c.get("https://ecommerce.routemisr.com/api/v1/cart",{headers:{token:localStorage.getItem("ecommToken")}});c(e.data),f(e.numOfCartItems),d(!1)}catch(e){d(!1)}}()}),[]),(0,r.jsx)(r.Fragment,{children:"cart"===i?(0,r.jsx)(m,{}):(0,r.jsx)(r.Fragment,{children:null!==t&&void 0!==t&&t.totalCartPrice?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:" mt-5 mb-4  text-end container",children:(0,r.jsx)(n.cH,{onClick:()=>async function(){try{const{data:e}=await o.c.delete("https://ecommerce.routemisr.com/api/v1/cart",{headers:{token:localStorage.getItem("ecommToken")}});c(e.data),f(e.numOfCartItems)}catch(e){}}(),className:"text-danger  cursor-pointer me-3",children:"Clear All"})}),(0,r.jsxs)("main",{className:"container",children:[console.log(t),null===t||void 0===t||null===(e=t.products)||void 0===e?void 0:e.map(((e,t)=>(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(a.Suspense,{fallback:(0,r.jsx)(m,{}),children:(0,r.jsx)(l,{loading:i,itemCount:e.count,updateProductCount:g,product:e,deleteFromCart:p},e._id)},e._id+1)})))]}),(0,r.jsxs)("div",{className:"cart-checkout-div d-flex justify-content-between align-items-center mt-4 mb-5 pb-5 container",children:[(0,r.jsx)(n.cH,{to:"/Address/".concat(t._id),className:"cart-check-btn btn btn-success d-block me-auto mt-3 text-white",children:"Check Out"}),(0,r.jsxs)("span",{className:"fw-bold fs-4 text-success",children:[(0,r.jsx)("span",{className:"fw-bold fs-6 mt-3 text-black",children:"Total Price:"})," ",null===t||void 0===t?void 0:t.totalCartPrice," EGP "]})]})]}):(0,r.jsxs)("div",{className:" bg-success-subtle  border-3 border-success rounded mt-5 py-5 d-flex flex-column justify-content-center align-items-center",children:[(0,r.jsx)("h2",{className:"d-block text-main",children:"Cart is EMPTY"}),(0,r.jsx)("img",{className:"w-25 rounded mt-2 ",src:"https://http.cat/204",alt:""})]})})})}}}]);
//# sourceMappingURL=864.5b233ef3.chunk.js.map