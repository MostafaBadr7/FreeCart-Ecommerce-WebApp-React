{"version":3,"file":"static/js/864.5b233ef3.chunk.js","mappings":"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","sources":["Components/Cart/Cart.jsx"],"sourcesContent":["import React, { Suspense, lazy, useEffect, useState } from 'react'\r\nimport { useContext } from 'react'\r\nimport { CounterContext } from '../CounterContext/CounterContext'\r\nimport { Link } from 'react-router-dom';\r\nimport axios from 'axios'\r\n// import CartItem from '../CartItem/CartItem';\r\n// import Loading from '../Loading/Loading';\r\n\r\nconst CartItem = lazy(()=> import ('../CartItem/CartItem'))\r\nconst Loading = lazy(()=> import ('../Loading/Loading'))\r\n\r\nexport default function Cart() {\r\n\r\n    const [cart, setcart] = useState(false)\r\n    const [loading, setloading] = useState(true)\r\n    const [timeoutId, settimeoutId] = useState()\r\n    let {counter, setcounter} = useContext(CounterContext);\r\n\r\n    async function getCart(){\r\n      if(localStorage.getItem('ecommToken')){\r\n        try {\r\n          setloading('cart')\r\n          const {data} = await axios.get('https://ecommerce.routemisr.com/api/v1/cart',\r\n          {headers: {\r\n                token:localStorage.getItem('ecommToken')\r\n            }}\r\n          )\r\n          setcart(data.data);\r\n          setcounter(data.numOfCartItems);\r\n          setloading(false)\r\n        } catch (error) {\r\n          setloading(false)\r\n        }\r\n      }\r\n  }\r\n\r\n    async function deleteFromCart(productId){\r\n        setloading(productId)\r\n        const {data} = await axios.delete(`https://ecommerce.routemisr.com/api/v1/cart/${productId}`,\r\n        {headers: {\r\n              token:localStorage.getItem('ecommToken')\r\n          }}\r\n        )\r\n        setcart(data.data)\r\n        setcounter(data.numOfCartItems);\r\n        setloading(false)\r\n    }\r\n\r\n    async function clearAllCart(){\r\n        try {\r\n          const {data} = await axios.delete(`https://ecommerce.routemisr.com/api/v1/cart`,\r\n          {headers: {\r\n                token:localStorage.getItem('ecommToken')\r\n            }}\r\n          )\r\n          setcart(data.data)\r\n          setcounter(data.numOfCartItems);\r\n        } catch (error) {\r\n        }\r\n    }\r\n\r\n     function updateProductCount(productId,productCount ){\r\n        clearTimeout(timeoutId);\r\n        settimeoutId(\r\n          setTimeout(\r\n            async()=>{\r\n              if(productCount === 0 ){\r\n                deleteFromCart(productId)\r\n              }else{\r\n                const {data} = await axios.put(`https://ecommerce.routemisr.com/api/v1/cart/${productId}`, {count : productCount},{headers:{token:localStorage.getItem('ecommToken')}} )\r\n                setcart(data.data)\r\n              }\r\n            }\r\n          )\r\n        )\r\n      }\r\n\r\n    useEffect(()=>{getCart()}, [])\r\n\r\n  return <>\r\n  {\r\n  loading === 'cart'? \r\n        <Loading/>\r\n    :\r\n        <>\r\n              {!!cart?.totalCartPrice ? <>\r\n                <div className=' mt-5 mb-4  text-end container'>\r\n                  <Link onClick={()=>clearAllCart()} className='text-danger  cursor-pointer me-3'>Clear All</Link>\r\n                </div>\r\n                {/* >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> Single Cart <<<<<<<<<<<<<<<<<<<<<<<<<<<< */}\r\n                <main className='container'>\r\n                  {console.log(cart)}\r\n                    { cart?.products?.map((product, index)=>\r\n                      <>\r\n                      <Suspense key={product._id+1}  fallback={<Loading/>}>\r\n                        <CartItem key={product._id} loading={loading} itemCount={product.count} updateProductCount={updateProductCount} product={product} deleteFromCart={deleteFromCart} />\r\n                      </Suspense>\r\n                      </>\r\n                      )\r\n                    }\r\n                </main>\r\n                {/* >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> Check Out <<<<<<<<<<<<<<<<<<<<<<<<<<<< */}\r\n                  <div className='cart-checkout-div d-flex justify-content-between align-items-center mt-4 mb-5 pb-5 container'>\r\n                    <Link to={`/Address/${cart._id}`} className='cart-check-btn btn btn-success d-block me-auto mt-3 text-white'>Check Out</Link>\r\n                    <span className='fw-bold fs-4 text-success'><span className='fw-bold fs-6 mt-3 text-black'>Total Price:</span> {cart?.totalCartPrice} EGP </span>\r\n                  </div>\r\n                                </>\r\n                : \r\n                <div className=' bg-success-subtle  border-3 border-success rounded mt-5 py-5 d-flex flex-column justify-content-center align-items-center'>\r\n                {/* <div className='alert alert-info  fs-1 text-center w-100'>Card is Empty</div> */}\r\n                <h2 className='d-block text-main'>Cart is EMPTY</h2>\r\n                <img className='w-25 rounded mt-2 ' src='https://http.cat/204' alt=\"\" />\r\n                </div>\r\n                }\r\n        </>\r\n}\r\n</>\r\n}\r\n"],"names":["CartItem","lazy","Loading","Cart","_cart$products","cart","setcart","useState","loading","setloading","timeoutId","settimeoutId","counter","setcounter","useContext","CounterContext","async","deleteFromCart","productId","data","axios","delete","concat","headers","token","localStorage","getItem","numOfCartItems","updateProductCount","productCount","clearTimeout","setTimeout","put","count","useEffect","get","error","getCart","_jsx","_Fragment","children","totalCartPrice","_jsxs","className","Link","onClick","clearAllCart","console","log","products","map","product","index","Suspense","fallback","itemCount","_id","to","src","alt"],"sourceRoot":""}